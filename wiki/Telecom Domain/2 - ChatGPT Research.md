# Telecommunications & SMS Network Technical Reference

## The Telecommunications Knowledge Domain

**Telecommunications** refers to the transmission of information over distances through electronic means (e.g. via wire, radio, or optical systems)[dbpedia.org](https://dbpedia.org/page/Telecommunications#:~:text=Telecommunication%20is%20the%20transmission%20of,are%20excluded%20from%20the%20field). This domain encompasses telephone networks, mobile cellular networks, radio, television broadcasting, and the Internet. In essence, telecommunication enables voice, data, and messaging communications between distant parties. Modern telecom networks are highly complex, involving multiple layered technologies and protocols to ensure different systems can interoperate globally.

For a software developer new to telecom, key areas of this domain include:

- **Network Infrastructure:** The physical and logical components that make communication possible. This ranges from cell towers and switches to databases and signaling links. For example, mobile networks have radio base stations that connect cellphones to core switching systems.
    
- **Signaling Protocols:** Special communication protocols like SS7 (Signaling System No. 7) that coordinate how calls and messages are setup, routed, and terminated across the network. These are quite different from typical Internet protocols a developer might know, and are crucial for things like phone call setup and SMS delivery.
    
- **Identifiers & Numbering:** Telecom uses various identifiers (phone numbers, IMSI, etc.) and numbering plans to route traffic. Understanding how a phone number or a SIM’s IMSI maps to routing information is fundamental for working with mobile services.
    
- **Services like SMS & Voice:** The domain includes legacy services such as SMS (text messaging) and voice calls, which have specific procedures and network elements dedicated to them. For instance, SMS involves an **SMSC** (Short Message Service Center) that store-and-forwards text messages, using the signaling network to reach the destination device.
    

Overall, the telecommunications domain blends hardware, software, and standardized protocols. It requires knowledge of both high-level system architecture and low-level signaling interactions. In the context of this document, we focus on the mobile/SMS side of telecom, diving into how SMS is routed through the GSM network and the SS7 signaling system that underpins it.

## What The Company Does

_The Company_ in this context is a hypothetical (or your) organization operating in the telecommunications industry, specifically in the SMS and interconnect domain. In simple terms, the company provides services that enable SMS text messages to be exchanged between different mobile networks and enterprise applications. This typically involves acting as an **SMS aggregator** or **interconnect hub** for messaging.

Key aspects of the company’s role include:

- **SMS Aggregation:** The company offers a single platform through which businesses or other carriers can send SMS to any mobile network. It maintains connections to multiple mobile network operators (MNOs) worldwide, so clients don’t need to connect to each operator individually[swiftsmsgateway.com](https://www.swiftsmsgateway.com/2025/02/19/understanding-sms-aggregators-and-their-role-in-modern-communication/#:~:text=For%20businesses%20and%20institutions%2C%20SMS,strategies%20and%20reach%20customers%20effectively). The aggregator platform determines the optimal routing for each message and handles the delivery across networks.
    
- **Protocol Management:** The company’s systems handle specialized telecom protocols on behalf of customers. For example, they use the SMPP protocol to interface with enterprise applications (allowing those apps to submit messages to the platform), and use SS7/SIGTRAN signaling to deliver SMS into mobile operator networks. They essentially translate and relay messages between the Internet (TCP/IP) side and the telecom signaling world (SS7)[swiftsmsgateway.com](https://www.swiftsmsgateway.com/2025/02/19/understanding-sms-aggregators-and-their-role-in-modern-communication/#:~:text=1,TCPA).
    
- **Interconnect Services:** As an interconnect hub, the company enables seamless **carrier-to-carrier communication** for SMS (and possibly voice or data). If one operator’s subscriber wants to message another operator’s subscriber, the interconnect ensures the SMS is routed correctly between those operator networks. The company’s infrastructure (signaling gateways, routers, databases) handles the global addressing—using phone numbers or IMSIs—to find the correct destination network for each SMS.
    
- **Value-Added Services:** In many cases, such a company also provides value-adds like message filtering, conversion, or compliance. For instance, they might implement spam filters or ensure messages comply with local regulations. (An **aggregator** often must handle compliance and opt-out lists, while a pure **interconnect** focuses on technical delivery[swiftsmsgateway.com](https://www.swiftsmsgateway.com/2025/02/19/understanding-sms-aggregators-and-their-role-in-modern-communication/#:~:text=Are%20Interconnects%20Aggregators%3F).)
    

In summary, the company bridges the gap between **enterprise systems** (or foreign networks) and **mobile operators** for SMS delivery. It runs the necessary core network elements (like SMSCs, gateways, and databases) to receive high volumes of messages from clients and terminate them to subscribers worldwide. This allows a developer or enterprise to send a text message through one API or connection to the company, and have that message delivered to any phone, anywhere, without dealing with each carrier individually. The company thus handles all the heavy lifting of routing, protocol negotiation, and reliability to ensure the SMS gets delivered efficiently.

## Extended Knowledge Base – SMS / Interconnect Domain

Now let’s dive into the technical foundations that make SMS and interconnect services possible. This includes understanding the SS7 signaling stack, the GSM network architecture, key identifiers for subscribers and routing, the procedures for SMS transfer, the SMPP protocol used in messaging platforms, and how modern IP networks carry old SS7 signals via SIGTRAN. The explanations are geared for a developer audience, breaking down each concept into digestible parts.

### SS7 Signaling Stack & Layers

_SS7 protocol stack in relation to OSI layers (MAP/TCAP for applications, SCCP for network routing, MTP for transport). The diagram illustrates how SMS signaling travels through these layers._

**Signaling System No. 7 (SS7)** is the backbone signaling protocol suite used in telephone networks for call setup, routing, and control messages. Mobile networks leveraged SS7 for services like SMS and roaming. SS7 is structured as a layered stack, analogous to the OSI model, with each layer providing specific functions[numberanalytics.com](https://www.numberanalytics.com/blog/ss7-network-fundamentals#:~:text=,The%20TCAP%20is%20responsible)[numberanalytics.com](https://www.numberanalytics.com/blog/ss7-network-fundamentals#:~:text=graph%20LR%3B%20MTP1):

- **MTP (Message Transfer Part) Levels 1-3:** These are the lowest three layers of SS7, corresponding roughly to physical, data link, and network layers.
    
    - _MTP Level 1_ defines the physical connection (e.g. a 64 kbps TDM line in traditional SS7)[geeksforgeeks.org](https://www.geeksforgeeks.org/computer-networks/what-is-ss7-protocol-stack/#:~:text=Image%3A%20SS7%20protocol%20stackSS7%20protocol,stack).
        
    - _MTP Level 2_ provides reliable link transmission (framing, error checking, flow control) so that signaling messages can be sent without loss or duplication[geeksforgeeks.org](https://www.geeksforgeeks.org/computer-networks/what-is-ss7-protocol-stack/#:~:text=2.%20SS7%20Level%202%20,messages%20are%20lost%20during%20transmission).
        
    - _MTP Level 3_ is the network layer for SS7. It does message routing, traffic management, and network-level redundancy. MTP3 routes messages between exchanges using numeric addresses called _point codes_, and can perform alternate routing if links fail[geeksforgeeks.org](https://www.geeksforgeeks.org/computer-networks/what-is-ss7-protocol-stack/#:~:text=3.%20SS7%20Level%203%20,are%20interconnected%20by%20SS7%20links).
        
- **SCCP (Signaling Connection Control Part):** This layer sits above MTP3 and provides extended routing and connection features. MTP3 by itself only routes by point codes (like an address of a specific exchange), but **SCCP enables global addressing** — e.g. the ability to route a message based on a phone number or IMSI, via a mechanism called Global Title Translation[geeksforgeeks.org](https://www.geeksforgeeks.org/computer-networks/what-is-ss7-protocol-stack/#:~:text=6,GTT%29%20capability)[geeksforgeeks.org](https://www.geeksforgeeks.org/computer-networks/what-is-ss7-protocol-stack/#:~:text=SCCP%20provides%20four%20message%20classes%3A). SCCP also allows both **connectionless** (analogous to UDP) and **connection-oriented** (analogous to TCP) signaling transport. For SMS and roaming services, SCCP is crucial because it lets an SMS be addressed to a subscriber’s number (global title), which gets translated to the actual point code of their serving exchange.
    
- **TCAP (Transaction Capabilities Application Part):** TCAP provides a way to package dialogues or transactions over SS7[numberanalytics.com](https://www.numberanalytics.com/blog/ss7-network-fundamentals#:~:text=,mobility%20management%20and%20roaming%20functions). It’s the session layer of SS7, allowing two network elements to exchange a series of query/response messages within a single _transaction_. For example, when an SMS needs to find the recipient’s location, an SS7 **transaction** is used: the SMSC sends a “Send Routing Info for SM” query and gets a response (more on this in SMS procedures). TCAP handles opening, continuing, and closing such query sessions. It’s used not only for SMS routing queries but also for database lookups (like checking subscriber info in the HLR) and many other mobile services.
    
- **MAP (Mobile Application Part):** MAP is the application layer protocol in GSM networks that defines the messages and procedures for mobile network services[en.wikipedia.org](https://en.wikipedia.org/wiki/Mobile_Application_Part#:~:text=The%20Mobile%20Application%20Part%20,SGSN). Think of MAP as a set of _commands_ and _operations_ for things like location update, authentication, and SMS delivery. For instance, sending an SMS invokes MAP operations like **MO-ForwardSM** or **MT-ForwardSM**, and querying the HLR for routing info uses the MAP operation **SendRoutingInfoForSM (SRI-SM)**. In short, MAP is the high-level language that mobile network nodes speak to each other to provide services (SMS, roaming, etc.)[en.wikipedia.org](https://en.wikipedia.org/wiki/Mobile_Application_Part#:~:text=The%20Mobile%20Application%20Part%20,SGSN)[en.wikipedia.org](https://en.wikipedia.org/wiki/Mobile_Application_Part#:~:text=MAP%20is%20a%20Transaction%20Capabilities,or%20using%20SIGTRAN). It rides on top of TCAP (each MAP operation is carried inside a TCAP transaction).
    
- **SIGTRAN Adaptation (M3UA) & SCTP:** Traditionally, SS7 ran on its own TDM networks. Modern networks carry SS7 signaling over IP using a family of protocols called **SIGTRAN**. The key components here are:
    
    - **SCTP (Stream Control Transmission Protocol):** A transport-layer protocol that operates on top of IP, designed for telephony signaling transport. It provides reliable, message-oriented delivery like TCP, but with enhancements such as multi-homing (redundant network paths) and multi-streaming (parallel independent streams) to prevent head-of-line blocking[zytrax.com](https://www.zytrax.com/tech/ss7/sigtran_intro.html#:~:text=,replaces%20a%20normal%20TCP%2FUDP%20layer)[zytrax.com](https://www.zytrax.com/tech/ss7/sigtran_intro.html#:~:text=SCTP%20). SCTP is used instead of TCP for SS7-over-IP because it better meets the reliability and timing needs of signaling.
        
    - **M3UA (MTP3 User Adaptation):** An adaptation layer that replaces MTP Level 3 in an IP environment[en.wikipedia.org](https://en.wikipedia.org/wiki/M3UA#:~:text=M3UA%20stands%20for%20MTP%20,messages%20between%20its%20network%20elements). M3UA allows SS7 application protocols (like SCCP, ISUP, MAP, etc.) to run over an IP network, by mapping MTP3 services over SCTP/IP. In essence, M3UA makes the SS7 nodes think they are still using MTP3, but under the hood those messages are transported by SCTP/IP. This enables seamless interoperability between classic SS7 equipment and IP-based signaling nodes[en.wikipedia.org](https://en.wikipedia.org/wiki/M3UA#:~:text=M3UA%20is%20a%20communication%20protocol,69%20of%20the%20signaling%20networks)[en.wikipedia.org](https://en.wikipedia.org/wiki/M3UA#:~:text=M3UA%20stands%20for%20MTP%20,messages%20between%20its%20network%20elements).
        

Putting it all together, an SMS delivered over a modern network will traverse a stack like **MAP → TCAP → SCCP → MTP3 (or M3UA) → MTP2 (or SCTP) → IP**. Each layer adds its header and functionality. For example, the SMS MAP message (say, _ForwardSM_) is encapsulated in a TCAP packet (as part of a transaction), which in turn is carried by SCCP using global title routing to find the right destination, which then goes over MTP3 or M3UA/SCTP depending on whether it’s a legacy link or over IP. **Together, this stack ensures that an SMS can be routed from one network element to another across the world, over either traditional SS7 links or modern IP backbones, without the higher-level application (MAP) needing to know the difference**[en.wikipedia.org](https://en.wikipedia.org/wiki/Short_Message_Service_technical_realisation_\(GSM\)#:~:text=The%20Short%20Message%20Service%20,and%20an%20appropriate%20adaptation%20layer)[en.wikipedia.org](https://en.wikipedia.org/wiki/M3UA#:~:text=M3UA%20is%20a%20communication%20protocol,69%20of%20the%20signaling%20networks).

### Key GSM Core Network Elements

When dealing with SMS in GSM (the 2G mobile system), it helps to know the core network elements that an SMS passes through. GSM’s architecture has several components, each with a specific role:

- **BTS (Base Transceiver Station):** This is the radio base station – essentially the **cell tower** and its radio equipment. A BTS facilitates wireless communication between the user’s mobile phone and the network[en.wikipedia.org](https://en.wikipedia.org/wiki/Base_transceiver_station#:~:text=A%20base%20transceiver%20station%20,WAN%29%20technology). It houses the antennas and transceivers that send/receive radio signals to mobiles in a cell. In an SMS scenario, when you send an SMS, your phone transmits it over the air to the BTS. The BTS is controlled by the BSC and is the first point of contact in the mobile network.
    
- **BSC (Base Station Controller):** The BSC controls one or more BTS sites. It manages radio resources, handles handovers (when a device moves from one cell to another), and assigns channels. In the path of an SMS, the BSC forwards messages between the BTS and the core network (MSC). Think of the BSC as a regional controller that connects the cell towers to the central network. (In the GSM architecture diagram, multiple BTS connect to a BSC, and then BSC connects upward to the MSC.)
    
- **MSC (Mobile Switching Center):** The MSC is the central switching node of the cellular network. It functions like a telephone exchange for mobile calls _and_ also orchestrates SMS routing within the network[electronics-notes.com](https://www.electronics-notes.com/articles/connectivity/2g-gsm/network-architecture.php#:~:text=The%20main%20element%20within%20the,MSC). When an SMS is sent from a mobile, it arrives at the serving MSC. The MSC then forwards the SMS on to the SMSC (using SS7 MAP as we’ll see), or if it’s an incoming SMS, the MSC delivers it to the recipient device. Besides switching, the MSC also interfaces with other networks (PSTN, other mobile networks) and coordinates mobility management tasks (registration, location updates) with the help of the databases (HLR/VLR). Essentially, for SMS, the MSC is the node that **connects the radio network to the SMSC and other core services**.
    
- **HLR (Home Location Register):** The HLR is a centralized subscriber database. It contains permanent subscriber information and their current registered location (which MSC/VLR they are connected to)[electronics-notes.com](https://www.electronics-notes.com/articles/connectivity/2g-gsm/network-architecture.php#:~:text=Home%20Location%20Register%20). For instance, your HLR entry stores your IMSI, your phone number (MSISDN), subscription details (what services you have, like SMS or data, roaming permissions, etc.), and the identifier of the MSC/VLR currently serving you. The HLR is crucial for routing SMS: when an SMS comes in for you, your HLR is queried to find out which MSC should get the message (since mobile users can move, the HLR knows your latest location). There is typically one HLR per carrier (often distributed for capacity), containing all subscriber records for that network.
    
- **VLR (Visitor Location Register):** The VLR is like a _localized_ subset of the HLR. Each MSC has an associated Visitor Location Register which stores info on all subscribers _currently located in that MSC’s area_[electronics-notes.com](https://www.electronics-notes.com/articles/connectivity/2g-gsm/network-architecture.php#:~:text=Visitor%20Location%20Register%20). When a subscriber roams into a new MSC area, that MSC’s VLR caches the subscriber’s data (retrieved from the HLR) – things like IMSI, subscribed services, etc. This way, the MSC can quickly check local VLR for most operations (like whether you’re allowed to receive SMS, or if your phone is active) without contacting the distant HLR each time. The VLR also keeps the temporary **location** information (which BTS/BSC or area the phone is in) to assist in delivering incoming calls or SMS. In SMS delivery, after the HLR tells the SMSC which MSC to send to, the MSC’s VLR will be used to actually complete the final leg (paging the device). In summary, _HLR is the authoritative home database for a subscriber; VLR is a temporary record while the subscriber is active in a given region_.
    

These components work together in the GSM network. For example, when you send an SMS from your mobile: BTS → BSC → MSC → out to SMSC. When an SMS is delivered to your phone: SMSC → (via some GMSC) MSC → BSC → BTS to your device. The HLR/VLR are in the background ensuring the network knows where you are so that the SMS can find you.

Additionally, GSM networks include other elements like the **SMSC** (Short Message Service Center) which is not part of the core switching network but a service center specifically for handling SMS store-and-forward, as well as the **AuC** (Authentication Center) for security and **EIR** (Equipment Identity Register) for blacklisting stolen devices. However, the list above covers the primary _routing_ nodes relevant to SMS flow.

### Subscriber & Routing Identifiers

Mobile networks use several identifiers to route messages and identify subscribers. Here are the key terms and their meanings (especially in the context of SMS routing):

|**Term**|**Description & Role**|
|---|---|
|**IMSI** (International Mobile Subscriber Identity)|A unique number (up to 15 digits) that **identifies a mobile subscriber** within the network[melroselabs.com](https://melroselabs.com/glossary/imsi-international-mobile-subscriber-identity/#:~:text=An%20International%20Mobile%20Subscriber%20Identity,networks%20and%20not%20made%20public). The IMSI is stored in the SIM card and in the HLR. It consists of a country code (MCC), a network code (MNC), and a subscriber number (MSIN). The IMSI is used internally by the network for routing and authorization; for example, when another network wants to deliver an SMS to you, they will obtain your IMSI to route the message internally. (IMSI is sensitive and usually not disclosed publicly; your phone number is the public identifier while the IMSI is a secret network identifier.)|
|**MSISDN** (Mobile Station ISDN Number)|This is the **phone number** of a mobile subscriber, in full international format[infobip.com](https://www.infobip.com/glossary/msisdn#:~:text=Network%29%3F%20www,send%20an%20SMS%20message%20to). The MSISDN is what we dial to call someone or what we text to send an SMS. It is stored in the HLR and is associated with the IMSI. In routing terms, an SMS is typically addressed to the recipient’s MSISDN. The MSISDN is used by the SMSC/GMSC to query the HLR and figure out where to deliver the SMS. In other words, MSISDN is the human-friendly identifier, and the network will translate that into routing info (IMSI and MSC address) via a lookup.|
|**SRI-SM** (Send Routing Info for Short Message)|A **MAP procedure for SMS routing**. When an SMS arrives at the sender’s SMSC (or a gateway MSC), the SMSC doesn’t know where the recipient currently is. It performs an _SRI for SM_ query to the recipient’s HLR: essentially asking “where shall I route this SMS?”[cellusys.com](https://www.cellusys.com/2016/03/19/subscriber-identity-disclosure-how-an-attacker-can-obtain-imsi-of-a-subscriber/#:~:text=Since%20the%20SMSC%20does%20not,used%20in%20the%20HLR%20query). The HLR responds with two crucial pieces of info: the subscriber’s IMSI, and the **MSC address** where that subscriber is currently registered[cellusys.com](https://www.cellusys.com/2016/03/19/subscriber-identity-disclosure-how-an-attacker-can-obtain-imsi-of-a-subscriber/#:~:text=the%20information%20pertinent%20to%20the,used%20in%20the%20HLR%20query)[cellusys.com](https://www.cellusys.com/2016/03/19/subscriber-identity-disclosure-how-an-attacker-can-obtain-imsi-of-a-subscriber/#:~:text=,of%20the%20targeted%20Subscriber). The SRI-SM is a transaction on the SS7 network (MAP over TCAP) that enables dynamic routing of SMS even as users move between areas.|
|**MSC Address (Global Title)**|The network address of the serving MSC (or SMS router) that can reach the subscriber. In SS7, this is often a **Global Title** – a formatted number that routes to the MSC/VLR. The HLR returns this address in the SRI-SM response[cellusys.com](https://www.cellusys.com/2016/03/19/subscriber-identity-disclosure-how-an-attacker-can-obtain-imsi-of-a-subscriber/#:~:text=After%20the%20HLR%20lookup%20%E2%80%93,level%20this%20message%20includes%20the). It could be an E.164 number or another format used as routing proxy. The SMSC will use the MSC address as the destination to send the SMS for delivery. In practical terms, this is like “Subscriber _12345_ is currently at MSC with address X”; the SMSC then connects to X to deliver the message. (If the subscriber is on another network, the MSC address could be in another network – the interconnect handles that.)|

To illustrate, imagine your friend with phone number +1-202-555-1234 sends you an SMS. Your number is the MSISDN. Their SMSC will do SRI-SM: “HLR of +1-202-555-1234, where is this user?” The HLR sees your IMSI (say, 310150123456789) and knows you’re currently on MSC address “GT 202-555-3000” (just an example). It sends back IMSI = 310150123456789 and MSC GT = 202-555-3000. With that, your friend’s SMSC has the routing info to forward the SMS to the right MSC, and the IMSI to identify you on that MSC.

### SMS Procedures

SMS in GSM uses a **store-and-forward** approach and involves two main procedures: **Mobile-Originated (MO) SMS submission** and **Mobile-Terminated (MT) SMS delivery**. Understanding the sequence of events in each is important, as it ties together the network elements and identifiers discussed above. Below is an overview of the SMS flow, broken into steps for MO and MT, along with how the protocols (MAP, SMPP) come into play:

_Illustration of SMS call flow: On the left, a mobile-originated SMS is sent from the Mobile Station (MS) through the MSC to the SMSC. On the right, the SMSC performs routing lookup via HLR (SRI-SM) and then the SMS is delivered to the recipient’s MSC (MT delivery). Ack = acknowledgments at MAP level._

1. **SMS Submission (Mobile-Originated SMS):** This is when a user sends an SMS from their handset. The steps are:
    
    - The mobile device (MS) sends the text message up to the network over the radio interface (using the control channel, since GSM carries SMS in the signaling channel). The message first reaches the **BTS**, then is forwarded to the **BSC**, and then to the **MSC** that is currently serving that mobile[cellusys.com](https://www.cellusys.com/2016/03/19/subscriber-identity-disclosure-how-an-attacker-can-obtain-imsi-of-a-subscriber/#:~:text=When%20a%20subscriber%20sends%20an,MSC%20indicating%20the%20SMSC%20receipt).
        
    - The serving MSC receives the SMS and recognizes that it’s an MO-SMS. It now needs to forward this to the Short Message Service Center (SMSC) for storage and onward delivery. The MSC encapsulates the SMS in a **MAP MO-ForwardSM** message (Mobile Originated Forward Short Message)[cellusys.com](https://www.cellusys.com/2016/03/19/subscriber-identity-disclosure-how-an-attacker-can-obtain-imsi-of-a-subscriber/#:~:text=to%20the%20base%20station,MSC%20indicating%20the%20SMSC%20receipt). Essentially, this MAP operation carries the SMS content and the target SMSC address.
        
    - The MSC sends the MAP MO-ForwardSM to the SMSC. In SS7 terms, the SMSC is often reached via a “gateway MSC” address or directly as a global title. The MO-ForwardSM is carried by SCCP/TCAP over SS7 to the SMSC. If successful, the SMSC responds with a MAP acknowledgement (indicating it received the message) which the MSC passes back to the mobile as an SMS-SUBMIT ACK (so the user sees the message was sent successfully)[cellusys.com](https://www.cellusys.com/2016/03/19/subscriber-identity-disclosure-how-an-attacker-can-obtain-imsi-of-a-subscriber/#:~:text=Mobile%20Originating%20Short%20Message%20Transfer,MSC%20indicating%20the%20SMSC%20receipt).
        
    - At this point, the SMSC stores the message and will take responsibility for delivering it to the recipient. The sending mobile’s part is done (it got an ACK from the network that the SMS has been accepted). If the recipient is on the same network, the same SMSC handles it; if it’s to another network, the SMSC (or a gateway) will handle inter-network routing.
        
2. **SMS Delivery (Mobile-Terminated SMS):** This is when the SMSC attempts to deliver the message to the recipient’s device. The steps are:
    
    - The SMSC (which now holds the message) must find out where to deliver it. It knows the recipient’s phone number (MSISDN) from the message. The SMSC sends a **Send Routing Info for SM (SRI-SM)** query to the recipient’s **HLR**[cellusys.com](https://www.cellusys.com/2016/03/19/subscriber-identity-disclosure-how-an-attacker-can-obtain-imsi-of-a-subscriber/#:~:text=Since%20the%20SMSC%20does%20not,used%20in%20the%20HLR%20query). This is the MAP procedure we described earlier. The query basically asks: “I have an SMS for +1-202-555-7890 – where (which MSC) should I send it to, and what’s the IMSI?”.
        
    - The HLR looks up the subscriber +1-202-555-7890. It retrieves the IMSI and the currently associated MSC address from its records (this subscriber’s VLR/MSC registration info). The HLR then returns a response to the SMSC: **IMSI = X, MSC GT address = Y** (plus a flag if the subscriber has SMS capability)[cellusys.com](https://www.cellusys.com/2016/03/19/subscriber-identity-disclosure-how-an-attacker-can-obtain-imsi-of-a-subscriber/#:~:text=After%20the%20HLR%20lookup%20%E2%80%93,level%20this%20message%20includes%20the). This tells the SMSC _how to route the SMS_.
        
    - Now the SMSC knows which serving MSC to send the SMS toward. The SMSC constructs a **MAP MT-ForwardSM** message (Mobile Terminated Forward Short Message), containing the SMS content, and sends it to the MSC address obtained[cellusys.com](https://www.cellusys.com/2016/03/19/subscriber-identity-disclosure-how-an-attacker-can-obtain-imsi-of-a-subscriber/#:~:text=After%20the%20receipt%20of%20the,currently%20serving%20the%20terminating%20subscriber). This again is an SS7 MAP operation, now in the MT direction. The message travels over the SS7 network (potentially through interconnect gateways) until it reaches the target MSC.
        
    - The serving **MSC** for the recipient gets the MT-ForwardSM (meaning an incoming SMS to deliver). The MSC contacts its VLR to ensure the subscriber is currently reachable (and not, say, switched off or out of coverage). If the subscriber is available, the MSC then pages the subscriber’s phone via the appropriate BSC/BTS and delivers the SMS over the air interface (on a paging or SDCCH channel in GSM). The mobile receives the SMS and sends back an ACK to the MSC.
        
    - The MSC, upon successful delivery to the handset, sends a MAP acknowledgment back to the SMSC (via the MT-ForwardSM response) indicating the SMS was delivered. At this point, the SMSC can log the message as delivered and will typically generate a delivery report.
        
    - If the phone was unreachable (e.g., turned off), the HLR would have told the SMSC (in SRI response) that the subscriber is absent, or the MSC would respond with an error. The SMSC would then store the message and retry later when the subscriber becomes available (this is why sometimes you get delayed SMS when you turn your phone on).
        

In summary, **Submit** is the process of an SMS going from mobile to SMSC, and **Deliver** is the process from SMSC to mobile[cellusys.com](https://www.cellusys.com/2016/03/19/subscriber-identity-disclosure-how-an-attacker-can-obtain-imsi-of-a-subscriber/#:~:text=to%20the%20base%20station,MSC%20indicating%20the%20SMSC%20receipt)[cellusys.com](https://www.cellusys.com/2016/03/19/subscriber-identity-disclosure-how-an-attacker-can-obtain-imsi-of-a-subscriber/#:~:text=After%20the%20receipt%20of%20the,currently%20serving%20the%20terminating%20subscriber). These terms correspond to the PDUs in SMS protocols: for example, in the GSM air interface the messages are called SMS-SUBMIT and SMS-DELIVER, and in MAP they are ForwardSM (mobile originated vs terminated).

It’s also worth noting how this maps to **SMPP**, the protocol often used between external applications and the SMSC: An application (ESME) will send a `submit_sm` to the SMSC to inject a message (this is analogous to the MO-ForwardSM from the MSC)[support.sparkpost.com](https://support.sparkpost.com/momentum/mobile/mobile-reference/overview-smppesme#:~:text=Once%20in%20the%20SMPP%20bound,final%20or%20interim%20message%20status). When the SMSC delivers a message to an application or confirms delivery, it uses `deliver_sm` (which carries either the mobile-originated message content or a delivery receipt)[support.sparkpost.com](https://support.sparkpost.com/momentum/mobile/mobile-reference/overview-smppesme#:~:text=Once%20in%20the%20SMPP%20bound,final%20or%20interim%20message%20status). We’ll discuss SMPP more in the next section, but conceptually **submit_sm = SMS submit, and deliver_sm = SMS deliver**.

To recap the flow with an example: _User A sends an SMS to User B._ User A’s phone sends it to A’s MSC, which forwards to SMSC. SMSC queries B’s HLR, gets routing, then forwards to B’s MSC, which delivers to B’s phone. Each step involves acknowledgments so that the network knows if it succeeded. This reliable store-and-forward mechanism is why SMS can afford to have phones offline – the SMS will be stored and retried when the phone reconnects. It’s also why we have delivery reports (the SMSC can notify the sender when the message was delivered).

### SMPP (Short Message Peer-to-Peer)

While the mobile network uses SS7/MAP for SMS internally, applications and external systems commonly use the **SMPP protocol** to interface with SMSCs. SMPP is an open, industry-standard protocol for exchanging SMS messages over IP networks[infobip.com](https://www.infobip.com/docs/essentials/api-essentials/smpp-specification#:~:text=SMPP%20specifications%20,industry%20for%20exchanging%20SMS%20messages). It’s widely used by SMS aggregators, gateways, and message centers to allow high-throughput SMS submission and delivery.

**Key characteristics of SMPP:**

- SMPP runs over a TCP/IP connection. An external client (called an **ESME** – External Short Message Entity) establishes a socket connection to the SMSC or SMS gateway and performs an SMPP **bind** (login) as a transmitter, receiver, or transceiver (for both)[support.sparkpost.com](https://support.sparkpost.com/momentum/mobile/mobile-reference/overview-smppesme#:~:text=Mobile%20Momentum%20begins%20an%20SMPP,acceptance%20or%20rejection%20of%20the). Once bound, the ESME and SMSC can exchange messages in both directions.
    
- The protocol is binary and PDU-based. Each PDU has a header and body. Important PDUs include:
    
    - **`bind_transmitter` / `bind_receiver` / `bind_transceiver`:** Used to authenticate and set up the session in a given mode (send, receive, or both).
        
    - **`submit_sm`:** Used by the ESME (client) to **submit an SMS** message to the SMSC[support.sparkpost.com](https://support.sparkpost.com/momentum/mobile/mobile-reference/overview-smppesme#:~:text=Once%20in%20the%20SMPP%20bound,final%20or%20interim%20message%20status). This PDU carries the destination number, originator, message text, and other metadata (like whether a delivery receipt is requested). Each `submit_sm` gets a response (`submit_sm_resp`) with an ID if accepted.
        
    - **`deliver_sm`:** Used by the SMSC to **deliver an SMS or delivery receipt** to the ESME[support.sparkpost.com](https://support.sparkpost.com/momentum/mobile/mobile-reference/overview-smppesme#:~:text=Once%20in%20the%20SMPP%20bound,final%20or%20interim%20message%20status). If the ESME is acting as a receiver (for mobile-originated messages, or for receipts), the SMSC will send those messages using `deliver_sm`. For example, if a mobile subscriber sends an MO-SMS to a service (like a two-factor code system), the mobile network might forward that SMS to an application through the SMSC using SMPP `deliver_sm`. Also, when an SMS is delivered to the phone, the SMSC can send a delivery report (DLR) via `deliver_sm` to the originator if requested.
        
    - **`enquire_link`:** A heartbeat PDU used by either side to ensure the connection is alive during periods of inactivity[support.sparkpost.com](https://support.sparkpost.com/momentum/mobile/mobile-reference/overview-smppesme#:~:text=Additionally%2C%20ESMEs%20and%20SMSCs%20periodically,assuming%20that%20the%20request%20has). If the other side doesn’t respond to enquire_link, the connection may be considered lost. SMPP sessions are often long-lived, so this keep-alive is important.
        
    - **`unbind`:** To gracefully terminate the session.
        
- SMPP is designed for high throughput and efficiency. For instance, multiple SMS PDUs can be pipelined without waiting for the previous one’s response (the responses can come asynchronously, identified by sequence numbers). This is useful for sending bulk SMS.
    
- Delivery receipts in SMPP are a special case of `deliver_sm` with a flag indicating it's a receipt and the message ID of the original message in the text. The ESME can use this to know if a message was delivered (or failed).
    

In practice, if you’re integrating an application with an SMS provider, you often use an SMPP API or library. For example, an alerting system might log in to an SMPP gateway as an ESME transmitter and send out SMS alerts via `submit_sm`. If two-way messaging is needed (like a voting system where users text in responses), the application would bind as a transceiver to both send `submit_sm` and receive incoming messages via `deliver_sm`.

SMPP abstracts away the SS7 layer – you don’t deal with IMSIs or SRI, you simply provide the phone number and message. The SMSC or gateway then takes care of translating that into the SS7/MAP domain to actually deliver the SMS. This division allows software developers to send SMS using familiar IP protocols while the telecom infrastructure handles the heavy lifting behind the scenes.

To connect back to our earlier discussion: SMPP’s **submit_sm** corresponds to the SMSC receiving a message (like MAP MO-ForwardSM) and **deliver_sm** corresponds to the SMSC delivering a message or receipt (like MAP MT-ForwardSM or a status report)[support.sparkpost.com](https://support.sparkpost.com/momentum/mobile/mobile-reference/overview-smppesme#:~:text=Once%20in%20the%20SMPP%20bound,final%20or%20interim%20message%20status). And the **enquire_link** is just to keep the TCP session healthy (since a dropped connection would mean lost messages in transit)[support.sparkpost.com](https://support.sparkpost.com/momentum/mobile/mobile-reference/overview-smppesme#:~:text=Additionally%2C%20ESMEs%20and%20SMSCs%20periodically,assuming%20that%20the%20request%20has).

In summary, **SMPP is the de facto interface for SMS in the commercial and developer space**, letting you send/receive SMS programmatically. It’s reliable and efficient, making it suitable for high-volume SMS applications such as bulk messaging, notifications, 2FA codes, and so on.

### GSM (Global System for Mobile Communications)

**GSM** is the 2G cellular standard that revolutionized mobile communications in the 1990s. It introduced digital wireless telephony and also incorporated SMS as a service. Even today (2025), GSM’s descendants (2.5G, 3G) are still in use for voice calls and SMS in many parts of the world, and the fundamental concepts of GSM remain relevant. Here’s an overview focusing on aspects related to SMS and network structure:

- **2G Digital Network:** GSM stands for _Global System for Mobile Communications_. It’s a digital network standard using TDMA (Time Division Multiple Access) technology in specified frequency bands (900 MHz, 1800 MHz, etc.)[geeksforgeeks.org](https://www.geeksforgeeks.org/computer-networks/gsm-in-wireless-communication/#:~:text=GSM%C2%A0stands%20for%20Global%20System%20for,each%20with%20its%20time%20slot). Voice is transmitted after being digitally encoded, and SMS is sent as a short signaling message. One of GSM’s big successes was the widespread adoption of SMS – a feature that was initially considered minor but became hugely popular.
    
- **Network Architecture:** GSM defines a clear-cut architecture with multiple subsystems:
    
    - The **Mobile Station (MS)** which is the user’s handset + SIM card.
        
    - The **Base Station Subsystem (BSS)** which includes BTS and BSC, handling radio communication and cell management[geeksforgeeks.org](https://www.geeksforgeeks.org/computer-networks/gsm-in-wireless-communication/#:~:text=Base%20Station%20Subsystem%20handles%20traffic,BSS%20having%20two%20components).
        
    - The **Network and Switching Subsystem (NSS)** which is the core network containing MSC, HLR, VLR, AuC, etc., responsible for switching calls and mobility management[geeksforgeeks.org](https://www.geeksforgeeks.org/computer-networks/gsm-in-wireless-communication/#:~:text=,If%20you).
        
    - The **Operation Support Subsystem (OSS)** for network management (not directly involved in SMS flow, more for the operator’s admin).
        
    
    In the context of SMS: The message travels from MS through BSS to NSS (MSC and out via maybe a Gateway MSC to SMSC). The delivery comes back in through an MSC to BSS to MS. We covered these components earlier.
    
- **SMS over GSM:** Importantly, **GSM carries SMS in the signaling (control) channels** of the network. Unlike voice which uses a dedicated traffic channel, SMS uses the SS7 signaling plane (specifically the SDCCH or SACCH channels when the phone is not in call, or even during a call it can use FACCH). This means SMS does not require an active voice channel and can be sent/received in the background. This design choice allowed SMS to be implemented without additional radio resources, piggybacking on existing control channel capacity.
    
    For example, when you send an SMS, your phone actually requests a small slot on a control channel. The BTS/BSC allocate an SDCCH (Stand-alone Dedicated Control Channel) for the transaction to carry the SMS to the MSC. The user doesn’t notice this level of detail, but it’s why an SMS can go through even during a voice call (or why sometimes a bunch of SMS might get delayed until after a call ends, in older networks where control channel was busy). On the network side, since SMS is a _MAP signaling message_, it is transferred via the SS7 network (potentially over SIGTRAN) as we detailed. The GSM standard (3GPP 23.040 and related) specifies how SMS is delivered over the GSM air interface and core network[en.wikipedia.org](https://en.wikipedia.org/wiki/Short_Message_Service_technical_realisation_\(GSM\)#:~:text=The%20Short%20Message%20Service%20,and%20an%20appropriate%20adaptation%20layer).
    
- **Roaming and Interconnect:** GSM was built with roaming in mind – a subscriber from network A can use network B when abroad. The HLR/VLR system handles this. For SMS, this means an SMS can be delivered to you whether you are on your home network or roaming on a visited network. The inter-network communication (through GMSC and HLR lookups across networks) uses SS7 global signaling. From a user perspective, GSM’s standardized approach ensures your phone number is reachable worldwide (assuming agreements between operators), and SMS will find you by querying your HLR no matter where you are.
    
- **Security and Authentication:** GSM introduced an _authentication center (AuC)_ that works with the HLR to authenticate the SIM using a shared secret and also to generate encryption keys for securing the radio interface. While this is tangential to SMS, it’s worth noting that the SMS contents over the air can be ciphered if encryption is turned on for the call (GSM A5 ciphering applies to the signaling channels as well). However, once the SMS is in the core network (MSC onward), it’s just data in signaling messages (historically not encrypted within the SS7 network, which is why SS7 has well-known security issues today).
    
- **Evolution:** GSM (2G) networks were followed by 2.5G (GPRS/EDGE for packet data) and then 3G (UMTS) and 4G (LTE). Each added new ways of delivering messages (e.g., 4G LTE has the IP-based IMS for messaging). But interestingly, even 4G networks often still deliver SMS by falling back to the GSM/3G signaling methods (via an “SMS over SGs” interface or using the 4G network’s IMS if available). This backward compatibility underscores GSM’s lasting legacy for SMS. Many LTE phones, when you send an SMS, if they haven’t registered to IMS, will actually use the old GSM procedure through a 4G-to-MSC connection, invisibly to the user.
    

In essence, GSM provides the fundamental blueprint of a mobile network: **radio access** (BTS/BSC), **core switching** (MSC), **subscriber databases** (HLR/VLR), and it specifies how an SMS is handled within that structure. Because GSM networks are still operational and form the fallback of newer systems, the procedures we described for SMS are still very much in use. SMS in GSM is reliable and straightforward, contributing to the global interoperability of text messaging.

### SIGTRAN (Signaling Transport over IP)

As mentioned earlier, SS7 was designed for dedicated telephony networks using TDM links (T1/E1 lines, etc.). With the rise of IP networks, the industry wanted to carry SS7 signaling over IP to reduce costs and improve flexibility. **SIGTRAN** is the name given to the suite of protocols that make this possible. It was standardized by the IETF and allows seamless interworking between SS7 and IP-based signaling nodes[zytrax.com](https://www.zytrax.com/tech/ss7/sigtran_intro.html#:~:text=Common%20Channel%20Signaling%20System%20,PSTN%29%20and%20vice%20versa).

Key points about SIGTRAN:

- **SS7 over IP:** SIGTRAN isn’t a single protocol but a family. Its core idea is to replace the lower layers (MTP2/MTP3) of SS7 with IP-based equivalents, while keeping the upper layers (SCCP, TCAP, MAP, ISUP, etc.) unchanged. This means an MSC or HLR can communicate with an SMSC over an IP network as if it were SS7, by using SIGTRAN on both ends to package the SS7 messages into IP packets.
    
- **Protocol Stack:** The SIGTRAN stack has three components[zytrax.com](https://www.zytrax.com/tech/ss7/sigtran_intro.html#:~:text=The%20SIGTRAN%20protocol%20stack%20consists,of%203%20components):
    
    1. **Standard IP layer** – uses IP for network transport.
        
    2. **Common transport protocol: SCTP** – as discussed, SCTP is used instead of TCP/UDP because it’s better suited for signaling (multi-homing for redundancy, multi-streaming to avoid head-of-line blocking, message orientation, congestion avoidance tuned for signaling)[zytrax.com](https://www.zytrax.com/tech/ss7/sigtran_intro.html#:~:text=,replaces%20a%20normal%20TCP%2FUDP%20layer)[zytrax.com](https://www.zytrax.com/tech/ss7/sigtran_intro.html#:~:text=SCTP%20).
        
    3. **Adaptation layer** – this is what interfaces with the SS7 layer. There are different adaptation protocols for different needs:
        
        - **M3UA (MTP3 User Adaptation):** For carrying any MTP3-user part (like SCCP, ISUP) over IP[zytrax.com](https://www.zytrax.com/tech/ss7/sigtran_intro.html#:~:text=,M3UA%20%2C%20and%20%2076). This is used in most cases, including for carrying SCCP/MAP for SMS.
            
        - **SUA (SCCP User Adaptation):** An adaptation that allows running SCCP-user directly over SCTP, effectively combining SCCP into the IP layer (less commonly used; M3UA is more prevalent, but SUA could carry say MAP without needing classic MTP3).
            
        - **M2PA, M2UA:** Adaptations for linking at MTP Level 2, used in specific scenarios like connecting IP signaling points to traditional SS7 link sets.
            
        - Others exist (IUA for ISDN Q.931 over IP, etc.) but for mobile core networks, **M3UA** is the workhorse.
            
    
    In an SMS context, typically M3UA is used. For example, an SMSC might be an IP-based software running on a server, connecting via SCTP/M3UA to an STP (Signal Transfer Point) or directly to an HLR or MSC which is on IP or through an SG (Signaling Gateway). The SMSC sends MAP messages which go through M3UA, across IP, and out the other side to the SS7 node.
    
- **Signaling Gateway (SG) and IP Nodes:** In a network using SIGTRAN, you often have a **Signaling Gateway** at the boundary which interfaces with traditional SS7 links on one side and with IP on the other. The SG will terminate MTP2 on the TDM side and use M3UA/SCTP on the IP side. Behind the SG, you might have IP-based core network nodes (like an IP-SMSC or IP-HLR). Alternately, two networks can directly exchange over IP if they both support SIGTRAN. The architecture is flexible – you can have fully IP networks or mixed environments.
    
- **Benefit:** The benefit of SIGTRAN is mainly **scalability and cost**. Instead of expensive telecom signaling links and proprietary hardware, you can run signaling over standard IP networks and use commodity hardware. It also allows much higher throughput (many messages per second, limited mostly by bandwidth and processing, not by the fixed 64kbps per link of traditional SS7). The IETF notes that this breaks the tie to telephony-specific transport and “highly improves scalability” of signaling networks[en.wikipedia.org](https://en.wikipedia.org/wiki/M3UA#:~:text=M3UA%20is%20a%20communication%20protocol,69%20of%20the%20signaling%20networks). It also eases international interconnect – instead of physical link interconnects, carriers can peer over IP (with proper security and traffic management, of course).
    
- **Example:** If our SMSC is communicating with an HLR for SRI-SM over SIGTRAN, what happens is: the SMSC formulates the MAP SRI-SM query. Through the SIGTRAN stack, this gets handed to M3UA which says "this is an SCCP message destined for Global Title X". The SCTP layer then sends it over IP to the Signaling Gateway or directly to the IP-enabled STP of the other network. The message arrives, M3UA on the other side delivers it to SCCP, SCCP does Global Title Translation to find the HLR, and then HLR gets the MAP message and responds. The response goes back the same route. All of this occurs over IP with no change in the MAP/T CAP messages themselves – they think it's normal SS7.
    

From an application developer’s standpoint, you might not deal with SIGTRAN directly, but it’s useful to know that modern telecom signaling is often just IP packets under the hood. If you ever run wireshark on a link to an SMSC (with appropriate access), you might actually see SCTP packets with M3UA and MAP inside, rather than old-school TDM traces. The transition to SIGTRAN also introduces the need for SIGTRAN configuration (like point codes, network appearance, routing keys, etc.), but those are specifics for network engineers.

In conclusion, **SIGTRAN provides the bridge that allowed SS7-based services like SMS to survive and thrive in the IP era**. By carrying SS7 messages over IP via SCTP/M3UA[zytrax.com](https://www.zytrax.com/tech/ss7/sigtran_intro.html#:~:text=,replaces%20a%20normal%20TCP%2FUDP%20layer)[zytrax.com](https://www.zytrax.com/tech/ss7/sigtran_intro.html#:~:text=,M3UA%20%2C%20and%20%2076), networks have gained flexibility and scale while still using the reliable, well-tested SS7 protocols at the application layer. This means all the telecom magic (like our SMS routing and delivery logic) can run over modern networks without needing the old infrastructure, ensuring that when you press “Send” on a text, it doesn’t really matter whether it’s going through an old SS7 link or a SIGTRAN tunnel – the result (and the protocols above) remain the same.